service: aws-s3cp-bulk
frameworkVersion: "=1.25.0"

provider:
  name: aws
  runtime: nodejs6.10
  region: ${opt:region, 'eu-west-1'}
  memorySize: 128
  timeout: 30
  environment:
    LAMBDA_CONCURRENCY: ${opt:LAMBDA_CONCURRENCY, 500}
    BATCH_SIZE: ${opt:BATCH_SIZE, 1}
  iamRoleStatements:
    - Effect: Allow
      Action:
        - lambda:InvokeFunction
      Resource: "arn:aws:lambda:eu-west-1:006483271430:function:aws-s3cp-bulk-production-copy"


package:
  exclude:
    - tests/**
    - .circleci/**

functions:
  copy:
    handler: handler.cp
  copy_manager:
    handler: handler.manager
